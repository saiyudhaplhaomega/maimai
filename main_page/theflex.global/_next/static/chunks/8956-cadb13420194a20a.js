"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8956],{58956:function(e,t,s){s.r(t),s.d(t,{default:function(){return H},saveBookingDetails:function(){return J}});var n=s(57437),a=s(2265),i=s(99376),o=s(66070),r=s(95186),c=s(26815),l=s(79294),d=s(83464),h=s(48672),u=s(36853),m=s(62869),x=s(51817),p=s(88226),g=s(35153),y=s(42936),j=s(26110),f=s(98108);let b=e=>{let{title:t,content:s}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold text-lg mb-4",children:(0,n.jsx)(f.Text,{children:t})}),(0,n.jsx)("div",{className:"space-y-4 text-sm text-muted-foreground",children:s})]})},v=e=>{let{city:t}=e,s={algiers:{title:"Booking Terms & Conditions",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"Welcome to The Flex!"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:'Thank you for choosing to stay with us. These Booking Terms and Conditions ("Terms") govern your reservation and occupancy, and by completing your booking through our website, you agree to be bound by these Terms.'})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"1. Key Definitions"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Company / we / us"})," means Flex Living Limited (company no. 12041011)."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Guest / you"})," means the person who places the Booking."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Booking"})," means a reservation confirmed by the Company and governed by these Terms."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Licence to Occupy"})," means the short-stay licence that arises when a Booking is finalised and is later recorded in the Full Licence to Occupy Agreement."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Pre-Check-In Process"})," means the secure on-line procedure described in clause 3."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Security Deposit"})," means the sum of 50,000 DZD referred to in clause 6."]})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"2. Acceptance of Terms"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"2.a. By finalising a Booking you (a) accept these Terms in full; (b) enter into a short-stay Licence to Occupy for the dates shown in your Booking confirmation; and (c) undertake to complete the Pre-Check-In Process, including execution of the Full Licence to Occupy Agreement, before arrival."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"2.b. These Terms prevail over any inconsistent statement in marketing materials or correspondence."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"3. Pre-Check-In Process"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"3.a. Following your booking, the Company will send you a secure link to commence the Pre-Check-In Process. Automated reminders are issued until all steps are completed."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"3.b. The pre-check-in process mandates that you:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Provide accurate personal details, including full name, phone number, email address, date of birth, and nationality;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Upload valid photographic identification (passport, driving licence, or national ID card);"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Submit a live selfie for identity verification purposes;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Electronically sign the Full Licence to Occupy Agreement;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Enter payment details for the 50,000 DZD security deposit."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"4. Conditions Precedent to Property Access"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"4.a. Until all Pre-Check-In requirements are fulfilled:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"The property address and access instructions shall remain undisclosed; and"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"The booking shall remain fully chargeable with no entitlement to refund in accordance with clause 5 (Cancellation and Refund Policy)."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"5. Cancellation and Refund Policy"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.a. Any modifications to the check-in date shall be treated as a cancellation and re-booking subject to the applicable timelines outlined within this cancellation and refund policy."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.b. For stays under 28 nights: If you cancel fourteen (14) days or more before the scheduled Check-in Date the Company will refund all monies paid. Cancellations received fewer than fourteen (14) days before the Check-in Date are not entitled to any refund."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.c. For stays of 28 nights or longer: If you cancel thirty (30) days or more before the scheduled Check-in Date the Company will refund all monies paid. Cancellations received fewer than thirty (30) days before the Check-in Date are not entitled to any refund."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"6. Security Deposit"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.a. During the pre-check-in process, you are required to provide payment details for a security deposit of 50,000 DZD to cover damages or violations of house rules (refer to the Schedule of Costs in the Full Licence to Occupy Agreement)."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.b. For credit card payments: a pre-authorisation hold of 50,000 DZD will be placed on your account."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.c. For debit card payments: the amount will be charged and refunded post-stay, minus any deductions for damages or rule breaches."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"7. House Rules"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"7.a. You, and anyone you permit to enter or occupy the Property, must adhere to the following:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No parties or events"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No smoking or vaping indoors"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No pets"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Quiet hours shall be observed from 22:00 to 08:00"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Occupancy shall not exceed the maximum capacity specified on your booking confirmation."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"8. Check-In and Check-Out"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.a. Standard check-in time shall commence at 15:00 on the scheduled arrival date;"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.b. Standard check-out time shall be no later than 10:00 on the scheduled departure date;"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.c. Early check-in and late check-out may be available for purchase during pre-check-in, subject to availability."})})]})},london:{title:"Booking Terms & Conditions",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"Welcome to The Flex!"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:'Thank you for choosing to stay with us. These Booking Terms and Conditions ("Terms") govern your reservation and occupancy, and by completing your booking through our website, you agree to be bound by these Terms.'})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"1. Key Definitions"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Company / we / us"})," means Flex Living Limited (company no. 12041011)."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Guest / you"})," means the person who places the Booking."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Booking"})," means a reservation confirmed by the Company and governed by these Terms."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Licence to Occupy"})," means the short-stay licence that arises when a Booking is finalised and is later recorded in the Full Licence to Occupy Agreement."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Pre-Check-In Process"})," means the secure on-line procedure described in clause 3."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Security Deposit"})," means the sum of \xa3500 referred to in clause 6."]})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"2. Acceptance of Terms"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"2.a. By finalising a Booking you (a) accept these Terms in full; (b) enter into a short-stay Licence to Occupy for the dates shown in your Booking confirmation; and (c) undertake to complete the Pre-Check-In Process, including execution of the Full Licence to Occupy Agreement, before arrival."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"2.b. These Terms prevail over any inconsistent statement in marketing materials or correspondence."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"3. Pre-Check-In Process"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"3.a. Following your booking, the Company will send you a secure link to commence the Pre-Check-In Process. Automated reminders are issued until all steps are completed."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"3.b. The pre-check-in process mandates that you:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Provide accurate personal details, including full name, phone number, email address, date of birth, and nationality;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Upload valid photographic identification (passport, driving licence, or national ID card);"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Submit a live selfie for identity verification purposes;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Electronically sign the Full Licence to Occupy Agreement;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Enter payment details for the \xa3500 security deposit."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"4. Conditions Precedent to Property Access"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"4.a. Until all Pre-Check-In requirements are fulfilled:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"The property address and access instructions shall remain undisclosed; and"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"The booking shall remain fully chargeable with no entitlement to refund in accordance with clause 5 (Cancellation and Refund Policy)."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"5. Cancellation and Refund Policy"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.a. Any modifications to the check-in date shall be treated as a cancellation and re-booking subject to the applicable timelines outlined within this cancellation and refund policy."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.b. For stays under 28 nights: If you cancel fourteen (14) days or more before the scheduled Check-in Date the Company will refund all monies paid. Cancellations received fewer than fourteen (14) days before the Check-in Date are not entitled to any refund."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.c. For stays of 28 nights or longer: If you cancel thirty (30) days or more before the scheduled Check-in Date the Company will refund all monies paid. Cancellations received fewer than thirty (30) days before the Check-in Date are not entitled to any refund."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"6. Security Deposit"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.a. During the pre-check-in process, you are required to provide payment details for a security deposit of \xa3500 to cover damages or violations of house rules (refer to the Schedule of Costs in the Full Licence to Occupy Agreement)."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.b. For credit card payments: a pre-authorisation hold of \xa3500 will be placed on your account."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.c. For debit card payments: the amount will be charged and refunded post-stay, minus any deductions for damages or rule breaches."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"7. House Rules"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"7.a. You, and anyone you permit to enter or occupy the Property, must adhere to the following:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No parties or events"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No smoking or vaping indoors"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No pets"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Quiet hours shall be observed from 22:00 to 08:00"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Occupancy shall not exceed the maximum capacity specified on your booking confirmation."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"8. Check-In and Check-Out"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.a. Standard check-in time shall commence at 15:00 on the scheduled arrival date;"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.b. Standard check-out time shall be no later than 10:00 on the scheduled departure date;"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.c. Early check-in and late check-out may be available for purchase during pre-check-in, subject to availability."})})]})},paris:{title:"Booking Terms & Conditions",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"Welcome to The Flex!"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:'Thank you for choosing to stay with us. These Booking Terms and Conditions ("Terms") govern your reservation and occupancy, and by completing your booking through our website, you agree to be bound by these Terms.'})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"1. Key Definitions"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Company / we / us"})," means Flex Living Limited (company no. 12041011)."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Guest / you"})," means the person who places the Booking."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Booking"})," means a reservation confirmed by the Company and governed by these Terms."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Licence to Occupy"})," means the short-stay licence that arises when a Booking is finalised and is later recorded in the Full Licence to Occupy Agreement."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Pre-Check-In Process"})," means the secure on-line procedure described in clause 3."]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f.Text,{children:[(0,n.jsx)("strong",{children:"Security Deposit"})," means the sum of €500 referred to in clause 6."]})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"2. Acceptance of Terms"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"2.a. By finalising a Booking you (a) accept these Terms in full; (b) enter into a short-stay Licence to Occupy for the dates shown in your Booking confirmation; and (c) undertake to complete the Pre-Check-In Process, including execution of the Full Licence to Occupy Agreement, before arrival."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"2.b. These Terms prevail over any inconsistent statement in marketing materials or correspondence."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"3. Pre-Check-In Process"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"3.a. Following your booking, the Company will send you a secure link to commence the Pre-Check-In Process. Automated reminders are issued until all steps are completed."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"3.b. The pre-check-in process mandates that you:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Provide accurate personal details, including full name, phone number, email address, date of birth, and nationality;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Upload valid photographic identification (passport, driving licence, or national ID card);"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Submit a live selfie for identity verification purposes;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Electronically sign the Full Licence to Occupy Agreement;"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Enter payment details for the €500 security deposit."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"4. Conditions Precedent to Property Access"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"4.a. Until all Pre-Check-In requirements are fulfilled:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"The property address and access instructions shall remain undisclosed; and"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"The booking shall remain fully chargeable with no entitlement to refund in accordance with clause 5 (Cancellation and Refund Policy)."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"5. Cancellation and Refund Policy"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.a. Any modifications to the check-in date shall be treated as a cancellation and re-booking subject to the applicable timelines outlined within this cancellation and refund policy."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.b. For stays under 28 nights: If you cancel fourteen (14) days or more before the scheduled Check-in Date the Company will refund all monies paid. Cancellations received fewer than fourteen (14) days before the Check-in Date are not entitled to any refund."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"5.c. For stays of 28 nights or longer: If you cancel thirty (30) days or more before the scheduled Check-in Date the Company will refund all monies paid. Cancellations received fewer than thirty (30) days before the Check-in Date are not entitled to any refund."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"6. Security Deposit"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.a. During the pre-check-in process, you are required to provide payment details for a security deposit of €500 to cover damages or violations of house rules (refer to the Schedule of Costs in the Full Licence to Occupy Agreement)."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.b. For credit card payments: a pre-authorisation hold of €500 will be placed on your account."})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"6.c. For debit card payments: the amount will be charged and refunded post-stay, minus any deductions for damages or rule breaches."})}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"7. House Rules"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"7.a. You, and anyone you permit to enter or occupy the Property, must adhere to the following:"})}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No parties or events"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No smoking or vaping indoors"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"No pets"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Quiet hours shall be observed from 22:00 to 08:00"})}),(0,n.jsx)("li",{children:(0,n.jsx)(f.Text,{children:"Occupancy shall not exceed the maximum capacity specified on your booking confirmation."})})]}),(0,n.jsx)("h4",{className:"font-semibold",children:(0,n.jsx)(f.Text,{children:"8. Check-In and Check-Out"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.a. Standard check-in time shall commence at 15:00 on the scheduled arrival date;"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.b. Standard check-out time shall be no later than 10:00 on the scheduled departure date;"})}),(0,n.jsx)("p",{children:(0,n.jsx)(f.Text,{children:"8.c. Early check-in and late check-out may be available for purchase during pre-check-in, subject to availability."})})]})}},a=s[t.toLowerCase()]||s.london;return(0,n.jsx)(b,{title:a.title,content:a.content})},N=(0,h.J)("pk_live_wWNfQKaeZ7jGwqRpwiA4xuSa00YQG0u9T7");function k(e){let{propertyId:t,firstName:s,lastName:o,email:r,phone:c,guests:d,amount:h,nativeCurrency:f,property:b,onValidationFailed:N,hostawayCity:k,paymentIntentId:C,bookingSessionKey:w}=e,T=(0,u.useStripe)(),D=(0,u.useElements)(),[_,E]=(0,a.useState)(!1),{toast:S}=(0,g.pm)(),{convertAmount:I}=(0,l.U)(),F=(0,i.useSearchParams)(),P=(0,i.usePathname)(),{getTranslatedText:A}=(0,y.M1)(),Z=b.currency||({London:"GBP",Paris:"EUR",Algiers:"DZD"})[b.city]||"USD";(0,a.useCallback)(e=>I(e,f,Z),[I,f,Z]);let O=()=>{let e=[];return s.trim()||e.push(A("checkout.first_name_required")),o.trim()||e.push(A("checkout.last_name_required")),r.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||e.push(A("checkout.valid_email_required")):e.push(A("checkout.email_required")),c.trim()?c.trim().length<6&&e.push(A("checkout.valid_phone_required")):e.push(A("checkout.phone_required")),e},B=async e=>{if(e.preventDefault(),!T||!D)return;let n=O();if(n.length>0){S({title:A("checkout.complete_required_info"),description:n.join(", "),variant:"destructive"}),N&&N();return}E(!0);try{var a,i,l,u,m,x,p,g,y;let e={propertyName:b.listingName,propertyId:t,guestName:"".concat(s," ").concat(o),guestEmail:r,guestPhone:c,checkIn:b.checkIn||new Date().toISOString(),checkOut:b.checkOut||new Date().toISOString(),city:b.city,totalPrice:h.toFixed(2),currency:f,numberOfGuests:d,property:{bedrooms:(b.totalBedrooms||b.bedrooms||1).toString(),bathrooms:(b.totalBathrooms||b.bathrooms||1).toString(),maxGuests:(b.guestsAllowed||b.maxGuests||d).toString(),pictureUrl:(null===(i=b.images)||void 0===i?void 0:null===(a=i[0])||void 0===a?void 0:a.url)||(null===(l=b.picture)||void 0===l?void 0:l.url)||""}};J(e);let n=null==F?void 0:F.get("from"),j=null==F?void 0:F.get("to");if(!n||!j)throw Error("Missing booking dates");let v=await fetch("/api/listings/".concat(t,"/availability"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromDate:n,toDate:j,city:k||b.city})});if(!v.ok)throw Error("Failed to check availability");if(!(await v.json()).isAvailable){S({title:A("checkout.property_unavailable"),description:A("checkout.property_unavailable_dates"),variant:"destructive"}),E(!1);return}if(localStorage.setItem("bookingListingId",t),localStorage.setItem("bookingArrivalDate",n),localStorage.setItem("bookingDepartureDate",j),localStorage.setItem("bookingFirstName",s),localStorage.setItem("bookingLastName",o),localStorage.setItem("bookingEmail",r),localStorage.setItem("bookingPhone",c),localStorage.setItem("bookingCurrency",f),localStorage.setItem("bookingTotalPrice",h.toFixed(2)),localStorage.setItem("bookingGuests",d),localStorage.setItem("bookingCity",b.city),localStorage.setItem("bookingPropertyName",b.listingName),b){let e=(null===(u=b.picture)||void 0===u?void 0:u.url)||(null===(x=b.images)||void 0===x?void 0:null===(m=x[0])||void 0===m?void 0:m.url)||"";localStorage.setItem("bookingPropertyImage",e),localStorage.setItem("bookingAmenityBeds",(null===(p=b.bedrooms)||void 0===p?void 0:p.toString())||"0"),localStorage.setItem("bookingAmenityBaths",(null===(g=b.bathrooms)||void 0===g?void 0:g.toString())||"0"),localStorage.setItem("bookingAmenityGuests",(null===(y=b.maxGuests)||void 0===y?void 0:y.toString())||"0"),localStorage.setItem("bookingCancellationPolicy",b.cancellationPolicy||"N/A"),localStorage.setItem("bookingHouseRules",b.houseRules||"N/A")}console.log("Updating payment intent with customer data before payment confirmation");try{let e={amount:Math.round(100*h),currency:f.toLowerCase(),originalAmount:h,originalCurrency:f,firstName:(null==s?void 0:s.trim())||"",lastName:(null==o?void 0:o.trim())||"",email:(null==r?void 0:r.trim())||"",phone:(null==c?void 0:c.trim())||"",checkIn:n,checkOut:j,propertyId:t,propertyName:b.listingName,city:b.city,guests:d,bedrooms:b.totalBedrooms,bathrooms:b.totalBathrooms,paymentIntentId:C};(await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?console.log("Payment intent updated successfully with customer data"):console.warn("Failed to update payment intent with customer data, but proceeding with payment")}catch(e){console.warn("Error updating payment intent with customer data:",e)}let N=P.split("/").filter(Boolean)[0],_=["fr","es","ar","zh"].includes(N)?N:null,{error:I}=await T.confirmPayment({elements:D,confirmParams:{return_url:"".concat(window.location.origin).concat(_?"/".concat(_,"/booking-confirmation"):"/booking-confirmation")}});if(I){S({title:A("checkout.payment_failed"),description:I.message||A("checkout.unexpected_error"),variant:"destructive"}),E(!1);return}localStorage.removeItem("paymentIntent_".concat(w))}catch(e){console.error("Payment error:",e),S({title:A("checkout.payment_error"),description:A("checkout.unexpected_error"),variant:"destructive"})}finally{E(!1)}};return(0,n.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,n.jsx)("div",{className:"rounded-xl space-y-4",children:(0,n.jsx)(u.PaymentElement,{options:{layout:{type:"tabs",defaultCollapsed:!1},fields:{billingDetails:"auto"},wallets:{applePay:"auto",googlePay:"auto"}},className:"[&_*]:!bg-transparent [&_.Tab]:!border-[#284E4C]/20 [&_.Tab]:hover:!border-[#284E4C] [&_.Tab--selected]:!bg-[#284E4C] [&_.Tab--selected]:!border-[#284E4C] [&_.Input]:!border-[#284E4C]/20 [&_.Input]:hover:!border-[#284E4C] [&_.Input]:focus:!border-[#284E4C] [&_.Label]:!text-[#5C5C5A]"})}),(0,n.jsxs)("div",{className:"text-sm text-[#5C5C5A] text-center px-2",children:[A("checkout.terms_agreement")," ",(0,n.jsxs)(j.Vq,{children:[(0,n.jsx)(j.hg,{asChild:!0,children:(0,n.jsx)(m.z,{variant:"link",className:"text-sm p-0 h-auto text-[#284E4C] hover:underline",children:A("checkout.booking_terms")})}),(0,n.jsx)(j.cZ,{className:"max-w-3xl",children:(0,n.jsx)("div",{className:"max-h-[70vh] overflow-y-auto pr-4",children:b&&(0,n.jsx)(v,{city:b.city})})})]})]}),(0,n.jsx)(m.z,{className:"w-full h-12 text-base bg-[#284E4C] hover:bg-[#284E4C]/90 text-white shadow-sm hover:shadow-md transition-all duration-200",type:"submit",disabled:!T||_,children:_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{className:"mr-2 h-5 w-5 animate-spin"}),A("checkout.processing_payment")]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{className:"mr-2 h-5 w-5"}),A("checkout.complete_payment")]})})]})}function C(e){let[t,s]=(0,a.useState)(),[o,r]=(0,a.useState)(),[c,l]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),{toast:m}=(0,g.pm)(),p=(0,i.useSearchParams)(),{getTranslatedText:j}=(0,y.M1)(),f="booking_".concat(e.propertyId,"_").concat(null==p?void 0:p.get("from"),"_").concat(null==p?void 0:p.get("to"),"_").concat(e.guests);if((0,a.useEffect)(()=>{d||c||(async()=>{try{let t=localStorage.getItem("paymentIntent_".concat(f));if(t){console.log("Found existing payment intent for this booking session:",t);try{let e=await fetch("/api/retrieve-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentIntentId:t})});if(e.ok){let t=await e.json();s(t.clientSecret),r(t.paymentIntentId),h(!0),console.log("Reusing existing payment intent");return}}catch(e){console.warn("Failed to retrieve existing payment intent, creating new one"),localStorage.removeItem("paymentIntent_".concat(f))}}let n=null==p?void 0:p.get("from"),a=null==p?void 0:p.get("to");if(!n||!a)throw Error("Missing booking dates");l(!0);let i={amount:Math.round(100*e.amount),currency:e.nativeCurrency.toLowerCase(),originalAmount:e.amount,originalCurrency:e.nativeCurrency,firstName:"",lastName:"",email:"",phone:"",checkIn:n,checkOut:a,propertyId:e.propertyId,propertyName:e.property.listingName,city:e.property.city,guests:e.guests,bedrooms:e.property.totalBedrooms,bathrooms:e.property.totalBathrooms,...e.couponCode&&{couponCode:e.couponCode,couponDiscount:e.couponDiscount,couponType:e.couponType,couponValue:e.couponValue}};console.log("Creating new payment intent for booking session:",f);let o=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok)throw Error("Failed to create payment intent");let c=await o.json();s(c.clientSecret),r(c.paymentIntentId),localStorage.setItem("paymentIntent_".concat(f),c.paymentIntentId),localStorage.setItem("currentPaymentIntentId",c.paymentIntentId),h(!0)}catch(e){console.error("Payment setup error:",e),m({title:j("checkout.payment_setup_error"),description:j("checkout.payment_init_failed"),variant:"destructive"})}finally{l(!1)}})()},[]),(0,a.useEffect)(()=>{d&&o&&(async()=>{try{console.log("Updating payment intent due to amount/currency/coupon change");let t=null==p?void 0:p.get("from"),n=null==p?void 0:p.get("to");if(!t||!n)return;let a={amount:Math.round(100*e.amount),currency:e.nativeCurrency.toLowerCase(),originalAmount:e.amount,originalCurrency:e.nativeCurrency,firstName:"",lastName:"",email:"",phone:"",checkIn:t,checkOut:n,propertyId:e.propertyId,propertyName:e.property.listingName,city:e.property.city,guests:e.guests,bedrooms:e.property.totalBedrooms,bathrooms:e.property.totalBathrooms,paymentIntentId:o,...e.couponCode&&{couponCode:e.couponCode,couponDiscount:e.couponDiscount,couponType:e.couponType,couponValue:e.couponValue}},i=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(i.ok){let e=await i.json();s(e.clientSecret),console.log("Payment intent updated successfully")}}catch(e){console.warn("Failed to update payment intent:",e)}})()},[e.amount,e.nativeCurrency,e.couponCode,d,o]),(0,a.useEffect)(()=>()=>{localStorage.removeItem("paymentIntentKey"),localStorage.removeItem("paymentIntentSecret")},[]),!t)return(0,n.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,n.jsx)(x.Z,{className:"h-8 w-8 animate-spin text-[#284E4C]"})});let b="".concat(t,"-").concat(o);return(0,n.jsx)(u.Elements,{stripe:N,options:{clientSecret:t,appearance:{theme:"stripe",variables:{colorPrimary:"#284E4C",colorBackground:"#ffffff",colorText:"#333333",colorDanger:"#EF4444",fontFamily:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',spacingUnit:"4px",borderRadius:"8px"},rules:{".Tab":{border:"1px solid rgba(40, 78, 76, 0.2)",backgroundColor:"transparent",boxShadow:"none"},".Tab:hover":{border:"1px solid #284E4C",backgroundColor:"rgba(40, 78, 76, 0.05)"},".Tab--selected":{backgroundColor:"#284E4C",border:"1px solid #284E4C",color:"white"},".Label":{fontWeight:"500",color:"#5C5C5A"},".Input":{backgroundColor:"transparent",border:"1px solid rgba(40, 78, 76, 0.2)",color:"#333333"},".Input:hover":{border:"1px solid #284E4C"},".Input:focus":{border:"1px solid #284E4C",boxShadow:"0 0 0 1px rgba(40, 78, 76, 0.2)"}}},locale:"en"},children:(0,n.jsx)(k,{...e,paymentIntentId:o,bookingSessionKey:f})},b)}var w=s(35974),T=s(97411),D=s(95080),_=s(49322),E=s(32489),S=s(94508),I=s(82638),F=s(71762);function P(e){let{property:t,fromDate:s,toDate:l,guests:h,totalPrice:u,cleaningFee:p,formatAmount:g,dailyPrices:j,nativeCurrency:f,coupon:b,couponDiscount:v=0,finalPrice:N,lengthOfStayDiscount:k=0,lengthOfStayDiscountPercentage:C=0,onCouponUpdate:P}=e,[A,Z]=(0,a.useState)(""),[O,B]=(0,a.useState)(!1),[L,U]=(0,a.useState)(null);(0,i.usePathname)(),(0,i.useSearchParams)();let{getTranslatedText:q}=(0,y.M1)();if(!s||!l||!h||!u)return null;let R=(0,F.k2)(new Date(s)),z=(0,F.k2)(new Date(l)),G=Math.ceil((new Date(l).getTime()-new Date(s).getTime())/864e5),M=async()=>{if(A.trim()){B(!0),U(null);try{let e=await d.Z.post("/api/validate-coupon",{code:A,nights:G});e.data.isValid&&e.data.coupon&&P&&(P(e.data.coupon),Z(""))}catch(s){var e,t;U((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to validate coupon"),P&&P(null)}finally{B(!1)}}};return(0,n.jsxs)(o.Zb,{className:"sticky top-24 overflow-hidden border-0 shadow-sm bg-white",children:[(0,n.jsx)("div",{className:"bg-[#F1F3EE] p-6 border-b border-gray-100",children:(0,n.jsx)("h3",{className:"text-lg font-semibold text-[#333333]",children:q("booking.booking_summary")})}),(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 bg-gray-50",children:(0,n.jsx)(I.o,{ratio:1,children:(0,n.jsx)("img",{src:t.images[0].url,alt:t.listingName,className:"object-cover w-full h-full"})})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-[#333333]",children:t.listingName}),(0,n.jsx)("p",{className:"text-sm text-[#5C5C5A] mt-0.5",children:t.city})]})]}),(0,n.jsxs)("div",{className:"space-y-3 rounded-xl p-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:q("checkout.check_in")}),(0,n.jsx)("span",{className:"font-medium text-[#333333]",children:R})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:q("checkout.check_out")}),(0,n.jsx)("span",{className:"font-medium text-[#333333]",children:z})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:q("checkout.duration")}),(0,n.jsxs)("span",{className:"font-medium text-[#333333]",children:[G," ",q(1===G?"checkout.night":"checkout.nights")]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:q("checkout.guests")}),(0,n.jsxs)("span",{className:"font-medium text-[#333333]",children:[h," ",q("checkout.guests")]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("span",{className:"text-[#5C5C5A]",children:[q("checkout.room_rate")," (",G," ",q(1===G?"checkout.night":"checkout.nights"),")"]}),(0,n.jsx)("span",{className:"font-medium text-[#333333]",children:g(u)})]}),k>0&&(0,n.jsxs)("div",{className:"flex justify-between items-center bg-gradient-to-r from-emerald-50 to-emerald-100/50 p-3 rounded-lg border border-emerald-200",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"p-1.5 bg-emerald-100 rounded-full",children:(0,n.jsx)(T.Z,{className:"h-3.5 w-3.5 text-emerald-600"})}),(0,n.jsxs)("span",{className:"text-emerald-700 text-sm font-medium",children:[C,"% ",q("checkout.length_stay_discount")]})]}),(0,n.jsxs)("span",{className:"font-medium text-emerald-700",children:["-",g(k)]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:q("checkout.cleaning_fee")}),(0,n.jsx)("span",{className:"font-medium text-[#333333]",children:g(p)})]}),(0,n.jsx)("div",{className:"pt-2 pb-3",children:b?(0,n.jsx)("div",{className:"bg-[#284E4C]/5 rounded-lg overflow-hidden border border-[#284E4C]/20",children:(0,n.jsx)("div",{className:"p-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"bg-[#284E4C]/10 p-1.5 rounded",children:(0,n.jsx)(D.Z,{className:"h-4 w-4 text-[#284E4C]"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#284E4C] font-medium",children:b.code}),(0,n.jsx)(w.C,{variant:"secondary",className:"bg-[#284E4C]/10 text-[#284E4C] border-0",children:q("checkout.applied")})]}),(0,n.jsx)("p",{className:"text-xs text-[#284E4C]/80 mt-0.5",children:"percentage"===b.discount_type?"".concat(b.discount_value,"% ").concat(q("checkout.off_your_stay")):"".concat(g(b.discount_value)," ").concat(q("checkout.off_your_stay"))})]})]}),(0,n.jsx)(m.z,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-[#284E4C]/10",onClick:()=>{P&&P(null),Z(""),U(null)},children:(0,n.jsx)(E.Z,{className:"h-4 w-4 text-[#284E4C]"})})]})})}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(c._,{htmlFor:"coupon-input",className:"text-sm text-[#284E4C] flex items-center gap-2",children:[(0,n.jsx)(D.Z,{className:"h-4 w-4 text-[#284E4C]"}),q("checkout.have_coupon")]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(r.I,{id:"coupon-input",type:"text",placeholder:q("checkout.enter_coupon_code"),value:A,onChange:e=>{Z(e.target.value.toUpperCase()),L&&U(null)},onKeyDown:e=>{"Enter"===e.key&&A.trim()&&M()},className:(0,S.cn)("pr-20 bg-gray-50 border-gray-200 shadow-sm transition-all duration-200 focus-visible:ring-[#284E4C]/20 focus-visible:border-[#284E4C] text-[#333333]",L?"border-destructive/50 focus:border-destructive focus:ring-destructive/20":"hover:border-[#284E4C]/50",O&&"opacity-50"),disabled:O}),(0,n.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,n.jsx)(m.z,{type:"button",variant:"ghost",size:"sm",className:(0,S.cn)("h-7 px-3 mr-1 font-medium transition-all",O?"text-[#5C5C5A]":"text-[#284E4C] hover:text-[#284E4C]/80"),onClick:M,disabled:O||!A.trim(),children:O?(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(x.Z,{className:"h-3 w-3 animate-spin"}),(0,n.jsx)("span",{children:q("checkout.validating")})]}):q("checkout.apply")})})]}),L&&(0,n.jsxs)("div",{className:"bg-red-50 rounded-lg p-3 flex items-start gap-2",children:[(0,n.jsx)(_.Z,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-red-700",children:q("checkout.invalid_coupon")}),(0,n.jsx)("p",{className:"text-sm text-red-600",children:L})]})]})]})}),b&&v>0&&(0,n.jsxs)("div",{className:"flex justify-between items-center text-[#284E4C] bg-[#284E4C]/5 p-3 rounded-lg",children:[(0,n.jsx)("span",{children:q("checkout.discount")}),(0,n.jsxs)("span",{className:"font-medium",children:["-",g(v)]})]})]}),(0,n.jsx)("div",{className:"mt-6 pt-4 border-t border-[#284E4C]/20",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-semibold text-lg text-[#333333]",children:q("checkout.total")}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("span",{className:"font-bold text-lg text-[#333333]",children:g(N||u+p-v-k)}),(k>0||v>0)&&(0,n.jsxs)("div",{className:"text-xs text-[#284E4C] mt-0.5",children:[q("checkout.you_saved")," ",g(k+v)]})]})]})})]})]})}var A=s(30401),Z=s(10407),O=s(32660),B=s(66337),L=s(41671),U=s(88906),q=s(89337),R=s(55156);let z=a.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:i=!0,...o}=e;return(0,n.jsx)(R.f,{ref:t,decorative:i,orientation:a,className:(0,S.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...o})});z.displayName=R.f.displayName;var G=s(50196);function M(e){let[t,s,n]=e.split("-").map(Number);return new Date(t,s-1,n,12,0,0)}function V(e){let{currentStep:t,totalSteps:s}=e,{getTranslatedText:a}=(0,y.M1)(),i=[{number:1,title:a("checkout.summary"),description:a("checkout.booking_details")},{number:2,title:a("checkout.guest_info"),description:a("checkout.your_information")},{number:3,title:a("checkout.payment"),description:a("checkout.complete_booking")}];return(0,n.jsx)("div",{className:"bg-white border-b border-gray-100 px-4 py-4",children:(0,n.jsx)("div",{className:"flex items-center justify-between mb-3",children:i.map((e,s)=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:(0,S.cn)("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-200",t>e.number?"bg-[#284E4C] text-white":t===e.number?"bg-[#284E4C] text-white":"bg-gray-100 text-gray-400"),children:t>e.number?(0,n.jsx)(A.Z,{className:"h-4 w-4"}):e.number}),(0,n.jsxs)("div",{className:"mt-2 text-center",children:[(0,n.jsx)("div",{className:(0,S.cn)("text-xs font-medium",t>=e.number?"text-[#284E4C]":"text-gray-400"),children:e.title}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]})]}),s<i.length-1&&(0,n.jsx)("div",{className:(0,S.cn)("flex-1 h-0.5 mx-4 transition-all duration-200",t>e.number?"bg-[#284E4C]":"bg-gray-200")})]},e.number))})})}function K(e){let{property:t,fromDate:s,toDate:i,guests:o,totalPrice:l,finalPrice:h,formatPrice:u,dailyPrices:p,coupon:g,couponDiscount:j,lengthOfStayDiscount:f,lengthOfStayDiscountPercentage:b,onNext:v,onCouponUpdate:N}=e,{getTranslatedText:k}=(0,y.M1)(),C=(0,F.k2)(M(s)),T=(0,F.k2)(M(i)),P=Math.ceil((M(i).getTime()-M(s).getTime())/864e5),[A,O]=(0,a.useState)(""),[B,L]=(0,a.useState)(!1),[U,q]=(0,a.useState)(null),R=async()=>{if(A.trim()){L(!0),q(null);try{let e=await d.Z.post("/api/validate-coupon",{code:A,nights:P});e.data.isValid&&e.data.coupon&&(N(e.data.coupon),O(""))}catch(s){var e,t;q((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to validate coupon"),N(null)}finally{L(!1)}}};return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-6",children:[(0,n.jsx)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden flex-shrink-0 bg-gray-50",children:(0,n.jsx)(I.o,{ratio:1,children:(0,n.jsx)("img",{src:t.images&&Array.isArray(t.images)&&t.images.length>0?t.images[0].url:"",alt:t.listingName,className:"object-cover w-full h-full"})})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-semibold text-[#333333] text-lg leading-tight",children:t.listingName}),(0,n.jsx)("p",{className:"text-[#5C5C5A] text-sm mt-1",children:t.city}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,n.jsxs)(w.C,{variant:"secondary",className:"bg-[#284E4C]/10 text-[#284E4C] text-xs",children:[o," ",k(1===o?"property.guest":"property.guests")]}),(0,n.jsxs)(w.C,{variant:"secondary",className:"bg-gray-100 text-gray-600 text-xs",children:[P," ",k(1===P?"checkout.night":"checkout.nights")]})]})]})]})}),(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[(0,n.jsx)("h4",{className:"font-semibold text-[#333333] mb-4",children:k("checkout.stay_details")}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:k("checkout.check_in")}),(0,n.jsx)("span",{className:"font-medium text-[#333333]",children:C})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:k("checkout.check_out")}),(0,n.jsx)("span",{className:"font-medium text-[#333333]",children:T})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:k("checkout.duration")}),(0,n.jsxs)("span",{className:"font-medium text-[#333333]",children:[P," ",k(1===P?"checkout.night":"checkout.nights")]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:k("checkout.guests")}),(0,n.jsxs)("span",{className:"font-medium text-[#333333]",children:[o," ",k(1===o?"property.guest":"property.guests")]})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[(0,n.jsx)("h4",{className:"font-semibold text-[#333333] mb-4",children:k("checkout.price_breakdown")}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("span",{className:"text-[#5C5C5A]",children:[k("checkout.room_rate")," (",P," ",k(1===P?"checkout.night":"checkout.nights"),")"]}),(0,n.jsx)("span",{className:"font-medium text-[#333333]",children:u(l)})]}),f>0&&(0,n.jsxs)("div",{className:"flex justify-between items-center bg-emerald-50 p-3 rounded-lg border border-emerald-200",children:[(0,n.jsxs)("span",{className:"text-emerald-700 text-sm font-medium",children:[b,"% ",k("checkout.length_stay_discount")]}),(0,n.jsxs)("span",{className:"font-medium text-emerald-700",children:["-",u(f)]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#5C5C5A]",children:k("checkout.cleaning_fee")}),(0,n.jsx)("span",{className:"font-medium text-[#333333]",children:u(t.cleaningFee)})]}),(0,n.jsx)("div",{className:"pt-2 pb-3",children:g?(0,n.jsx)("div",{className:"bg-[#284E4C]/5 rounded-lg border border-[#284E4C]/20 p-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"bg-[#284E4C]/10 p-1.5 rounded",children:(0,n.jsx)(D.Z,{className:"h-4 w-4 text-[#284E4C]"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-[#284E4C] font-medium",children:g.code}),(0,n.jsx)(w.C,{variant:"secondary",className:"bg-[#284E4C]/10 text-[#288E4C] border-0 text-xs",children:k("checkout.applied")})]}),(0,n.jsx)("p",{className:"text-xs text-[#284E4C]/80 mt-0.5",children:"percentage"===g.discount_type?"".concat(g.discount_value,"% ").concat(k("checkout.off_your_stay")):"".concat(u(g.discount_value)," ").concat(k("checkout.off_your_stay"))})]})]}),(0,n.jsx)(m.z,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-[#284E4C]/10",onClick:()=>{N(null),O(""),q(null)},children:(0,n.jsx)(E.Z,{className:"h-4 w-4 text-[#284E4C]"})})]})}):(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)(c._,{htmlFor:"mobile-coupon-input",className:"text-sm text-[#284E4C] flex items-center gap-2 font-medium",children:[(0,n.jsx)(D.Z,{className:"h-4 w-4 text-[#284E4C]"}),k("checkout.have_coupon")]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(r.I,{id:"mobile-coupon-input",type:"text",placeholder:k("checkout.enter_coupon_code"),value:A,onChange:e=>{O(e.target.value.toUpperCase()),U&&q(null)},onKeyDown:e=>{"Enter"===e.key&&A.trim()&&R()},className:(0,S.cn)("h-12 pr-20 bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333]",U?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"",B&&"opacity-50"),disabled:B}),(0,n.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,n.jsx)(m.z,{type:"button",variant:"ghost",size:"sm",className:(0,S.cn)("h-8 px-3 mr-2 font-medium transition-all rounded-lg",B?"text-[#5C5C5A]":"text-[#284E4C] hover:text-[#284E4C]/80 hover:bg-[#284E4C]/10"),onClick:R,disabled:B||!A.trim(),children:B?(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(x.Z,{className:"h-3 w-3 animate-spin"}),(0,n.jsx)("span",{className:"text-xs",children:k("checkout.checking")})]}):k("checkout.apply")})})]}),U&&(0,n.jsxs)("div",{className:"bg-red-50 rounded-lg p-3 flex items-start gap-2",children:[(0,n.jsx)(_.Z,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-red-700",children:k("checkout.invalid_coupon")}),(0,n.jsx)("p",{className:"text-sm text-red-600",children:U})]})]})]})}),g&&j>0&&(0,n.jsxs)("div",{className:"flex justify-between items-center bg-[#284E4C]/5 p-3 rounded-lg border border-[#284E4C]/20",children:[(0,n.jsxs)("span",{className:"text-[#284E4C] text-sm font-medium",children:[k("checkout.coupon_discount")," (",g.code,")"]}),(0,n.jsxs)("span",{className:"font-medium text-[#284E4C]",children:["-",u(j)]})]}),(0,n.jsx)(z,{className:"my-3"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-semibold text-lg text-[#333333]",children:k("checkout.total")}),(0,n.jsx)("span",{className:"font-bold text-lg text-[#333333]",children:u(h)})]}),(f>0||j>0)&&(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("span",{className:"text-sm text-[#284E4C] font-medium",children:[k("checkout.you_saved")," ",u(f+j)]})})]})]})]}),(0,n.jsx)("div",{className:"p-4 bg-white border-t border-gray-100",children:(0,n.jsxs)(m.z,{onClick:v,className:"w-full h-12 text-base bg-[#284E4C] hover:bg-[#284E4C]/90 text-white rounded-xl",children:[k("checkout.continue_to_guest_info"),(0,n.jsx)(Z.Z,{className:"ml-2 h-5 w-5"})]})})]})}function H(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{formatAmount:s,currency:h,convertAmount:u}=(0,l.U)(),{toast:x}=(0,g.pm)(),{getTranslatedText:j}=(0,y.M1)(),[f,b]=(0,a.useState)(null),[v,N]=(0,a.useState)(!0),[k,w]=(0,a.useState)("+44"),[T,D]=(0,a.useState)(""),[_,E]=(0,a.useState)(""),[S,I]=(0,a.useState)(""),[F,A]=(0,a.useState)(""),[R,z]=(0,a.useState)([]),[M,H]=(0,a.useState)(!0),[W,Q]=(0,a.useState)(null),[Y,$]=(0,a.useState)(null),[X,ee]=(0,a.useState)(0),[et,es]=(0,a.useState)(0),[en,ea]=(0,a.useState)(0),[ei,eo]=(0,a.useState)(1),[er,ec]=(0,a.useState)(!1),el=null==t?void 0:t.get("propertyId"),ed=null==t?void 0:t.get("from"),eh=null==t?void 0:t.get("to"),eu=null==t?void 0:t.get("guests"),[em,ex]=(0,a.useState)("USD"),[ep,eg]=(0,a.useState)(""),[ey,ej]=(0,a.useState)(h),ef=null==t?void 0:t.get("couponCode"),[eb,ev]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(f&&Y&&ed&&eh)try{if(window._learnq){let e=new Date,t=e.getTime(),s=e.toISOString().split("T")[0],n="".concat(T||"Guest"," ").concat(_||"User").trim(),a=window.location.href,i=u(Y,em,h),o=f.images&&f.images.length>0?f.images[0].url:"",r="".concat(window.location.origin,"/property/").concat(f.id);new Date(eh).getTime(),new Date(ed).getTime(),window._learnq.push(["track","Started Checkout",{$event_id:"startedcheckout_".concat(s,"_").concat(t,"_").concat(n.replace(/\s+/g,"")),$value:i,ItemNames:[f.listingName],CheckoutURL:a,Categories:[f.city],Items:[{ProductID:f.id.toString(),ProductName:f.listingName,ItemPrice:i,ProductURL:r,ImageURL:o,ProductCategories:[f.city]}]}])}}catch(e){console.error("Error firing Klaviyo tracking:",e)}},[f,Y,ed,eh,T,_,em,h,u]),(0,a.useEffect)(()=>{let e=()=>{ec(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let eN=(0,a.useCallback)(e=>s(e,em),[s,em]),ek=(0,a.useCallback)(e=>u(e,em,h),[u,em,h]);(0,a.useEffect)(()=>{h!==ey&&ej(h)},[h,ey]),(0,a.useEffect)(()=>{(async()=>{if(!el||!ed||!eh){x({title:j("checkout.invalid_booking"),description:j("checkout.missing_booking_info"),variant:"destructive"}),e.push("/");return}try{N(!0),H(!0),console.log("Fetching property data for ID:",el);let e=await d.Z.get("/api/listings/".concat(el));console.log("Property response:",e.data);let t=e.data.data[0];if(!t)throw Error("Property not found");b(t);let s=null,n=null,a=null,i=[t.city,...["London","Paris","Algiers"].filter(e=>e!==t.city)],o=null;for(let e of i)try{if((s=await d.Z.get("/api/listings/".concat(el,"/hostaway"),{params:{city:e}})).data&&s.data.result){n=s.data.result.currencyCode||({London:"GBP",Paris:"EUR",Algiers:"DZD"})[e]||"USD",a=e;break}}catch(e){o=e}if(!s||!n)throw o||Error("No valid Hostaway token found for any city");ex(n),eg(a||""),a&&a!==t.city&&console.log("[Hostaway Fallback] Propri\xe9t\xe9 ID: ".concat(t.id,", city d'origine: ").concat(t.city,", token utilis\xe9: ").concat(a,", villes test\xe9es:"),i);let r=null;if(ef){let e=Math.ceil((new Date(eh).getTime()-new Date(ed).getTime())/864e5),t=await d.Z.post("/api/validate-coupon",{code:ef,nights:e});t.data.isValid&&t.data.coupon&&(r=t.data.coupon,ev(r))}let c=await d.Z.get("/api/listings/".concat(el,"/calendars"),{params:{from:ed,to:eh}}),{dailyPrices:l,baseTotal:h,cleaningFee:u,couponDiscount:m,lengthOfStayDiscount:x,lengthOfStayDiscounts:p,finalTotal:g}=(await d.Z.post("/api/bookings/calculate",{propertyId:el,fromDate:ed,toDate:eh,cleaningFee:t.cleaningFee,nativeCurrency:n,couponCode:null==r?void 0:r.code,calendarData:c.data.data})).data;z(l),Q(h),$(g),ee(m),es(x);let y=Math.ceil((new Date(eh).getTime()-new Date(ed).getTime())/864e5),j=null==p?void 0:p.find(e=>y>=e.nights);ea((null==j?void 0:j.percentage)||0)}catch(t){console.error("Failed to fetch booking details:",t),x({title:j("checkout.error"),description:j("checkout.failed_load_booking"),variant:"destructive"}),e.push("/")}finally{N(!1),H(!1)}})()},[el,ed,eh,ef,e,x]);let eC=e=>{let t=e.target.value;D(t.charAt(0).toUpperCase()+t.slice(1))},ew=e=>{let t=e.target.value;E(t.charAt(0).toUpperCase()+t.slice(1))},eT=(0,a.useCallback)(async e=>{try{if(!el||!ed||!eh||!f)return;let{dailyPrices:s,baseTotal:n,couponDiscount:a,finalTotal:i}=(await d.Z.post("/api/bookings/calculate",{propertyId:el,fromDate:ed,toDate:eh,cleaningFee:f.cleaningFee,nativeCurrency:em,couponCode:null==e?void 0:e.code})).data;z(s),Q(n),$(i),ee(a),ev(e);let o=new URLSearchParams(t.toString());e?o.set("couponCode",e.code):o.delete("couponCode"),window.history.replaceState({},"","".concat(window.location.pathname).concat(o.toString()?"?".concat(o.toString()):"")),x({title:e?j("checkout.coupon_applied"):j("checkout.coupon_removed"),description:e?"percentage"===e.discount_type?"".concat(e.discount_value,"% ").concat(j("checkout.discount_applied")):"".concat(e.discount_value," ").concat(j("checkout.discount_applied")):j("checkout.discount_removed")})}catch(e){console.error("Failed to update prices with coupon:",e),x({title:j("checkout.error"),description:j("checkout.failed_update_prices"),variant:"destructive"})}},[el,ed,eh,f,em,t,eN,x,j]),eD=(0,a.useCallback)(()=>{let e=[];return T.trim()||e.push(j("checkout.first_name_required")),_.trim()||e.push(j("checkout.last_name_required")),S.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S)||e.push(j("checkout.valid_email_required")):e.push(j("checkout.email_required")),F.trim()?F.trim().length<6&&e.push(j("checkout.valid_phone_required")):e.push(j("checkout.phone_required")),e},[T,_,S,F,j]),e_=(0,a.useCallback)(()=>2!==ei||0===eD().length,[ei,eD]),eE=(0,a.useCallback)(()=>{if(2===ei){let e=eD();if(e.length>0){x({title:j("checkout.complete_required_fields"),description:e[0],variant:"destructive"});return}}if(2===ei){var e,t;J({propertyName:null==f?void 0:f.listingName,guestName:"".concat(T," ").concat(_),guestEmail:S,guestPhone:"".concat(k).concat(F),checkIn:ed,checkOut:eh,city:null==f?void 0:f.city,totalPrice:null==Y?void 0:Y.toFixed(2),currency:em,numberOfGuests:eu,property:{bedrooms:null==f?void 0:f.totalBedrooms,bathrooms:null==f?void 0:f.totalBathrooms,maxGuests:null==f?void 0:f.guestsAllowed,cancellationPolicy:"N/A",houseRules:"N/A",pictureUrl:(null==f?void 0:null===(t=f.images)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.url)||""}})}eo(e=>Math.min(e+1,3)),window.scrollTo(0,0)},[ei,eD,f,T,_,S,k,F,ed,eh,Y,em,eu,x]),eS=()=>{eo(e=>Math.max(e-1,1))};return v||!f?(0,n.jsx)("div",{className:"min-h-screen flex flex-col",style:{backgroundColor:"#FFFDF6"},children:(0,n.jsx)("main",{className:"flex-grow flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#284E4C]"})})}):er?(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",style:{backgroundColor:"#FFFDF6"},children:[(0,n.jsxs)("div",{className:"bg-white border-b border-gray-100 pt-[88px]",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,n.jsx)(m.z,{variant:"ghost",size:"sm",className:"text-[#5C5C5A] hover:text-[#333333] hover:bg-[#284E4C]/5 p-2",onClick:()=>1===ei?e.back():eS(),children:(0,n.jsx)(O.Z,{className:"h-5 w-5"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h1",{className:"text-lg font-semibold text-[#333333]",children:j("checkout.complete_booking")}),(0,n.jsxs)("div",{className:"flex items-center gap-1 text-xs text-[#5C5C5A] mt-0.5",children:[(0,n.jsx)(B.Z,{className:"h-3 w-3"}),j("checkout.secure_checkout")]})]}),(0,n.jsx)("div",{className:"w-9"})," "]}),(0,n.jsx)(V,{currentStep:ei,totalSteps:3})]}),(0,n.jsxs)("main",{className:"flex-grow flex flex-col",children:[1===ei&&(0,n.jsx)(K,{property:f,fromDate:ed,toDate:eh,guests:eu,totalPrice:W,finalPrice:Y,formatPrice:eN,dailyPrices:R,coupon:eb,couponDiscount:X,lengthOfStayDiscount:et,lengthOfStayDiscountPercentage:en,onNext:eE,onCouponUpdate:eT}),2===ei&&(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-[#333333] mb-6",children:j("checkout.guest_information")}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"firstName",className:"text-sm font-medium text-[#333333]",children:j("checkout.first_name")}),(0,n.jsx)(r.I,{id:"firstName",value:T,onChange:eC,placeholder:j("checkout.john"),required:!0,className:"bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333] h-12"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"lastName",className:"text-sm font-medium text-[#333333]",children:j("checkout.last_name")}),(0,n.jsx)(r.I,{id:"lastName",value:_,onChange:ew,placeholder:j("checkout.doe"),required:!0,className:"bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333] h-12"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"email",className:"text-sm font-medium text-[#333333]",children:j("checkout.email")}),(0,n.jsx)(r.I,{id:"email",type:"email",value:S,onChange:e=>I(e.target.value),placeholder:j("checkout.john_example"),required:!0,className:"bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333] h-12"}),(0,n.jsxs)("p",{className:"text-xs text-[#5C5C5A] flex items-center mt-2",children:[(0,n.jsx)(L.Z,{className:"h-3 w-3 mr-1 text-emerald-500"}),j("checkout.booking_confirmation_email")]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"phone",className:"text-sm font-medium text-[#333333]",children:j("checkout.phone_number")}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(G.m,{value:k,onValueChange:w,className:"w-[120px]"}),(0,n.jsx)(r.I,{id:"phone",type:"tel",value:F,onChange:e=>A(e.target.value),placeholder:j("checkout.phone_placeholder"),required:!0,className:"bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333] h-12"})]}),(0,n.jsxs)("p",{className:"text-xs text-[#5C5C5A] flex items-center mt-2",children:[(0,n.jsx)(L.Z,{className:"h-3 w-3 mr-1 text-emerald-500"}),j("checkout.booking_updates_phone")]})]})]})]})}),(0,n.jsx)("div",{className:"p-4 bg-white border-t border-gray-100",children:(0,n.jsxs)(m.z,{onClick:eE,disabled:!e_(),className:"w-full h-12 text-base bg-[#284E4C] hover:bg-[#284E4C]/90 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[j("checkout.continue_to_payment"),(0,n.jsx)(Z.Z,{className:"ml-2 h-5 w-5"})]})})]}),3===ei&&W&&f&&(0,n.jsx)("div",{className:"flex flex-col h-full",children:(0,n.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-[#333333] mb-6",children:j("checkout.payment_details")}),(0,n.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 mb-6 flex items-start gap-3",children:[(0,n.jsx)(U.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900",children:j("checkout.secure_payment")}),(0,n.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:j("checkout.payment_encrypted")})]})]}),(0,n.jsx)(C,{amount:ek(Y||0),nativeCurrency:h,couponCode:null==eb?void 0:eb.code,couponDiscount:X,couponType:null==eb?void 0:eb.discount_type,couponValue:null==eb?void 0:eb.discount_value,propertyId:f.id.toString(),firstName:T,lastName:_,email:S,phone:"".concat(k).concat(F),guests:eu||"1",property:f,hostawayCity:ep,onValidationFailed:()=>{}},"".concat(h,"-").concat(Y,"-").concat((null==eb?void 0:eb.code)||"no-coupon"))]})})})]})]}):(0,n.jsx)("div",{className:"min-h-screen flex flex-col",style:{backgroundColor:"#FFFDF6"},children:(0,n.jsx)("main",{className:"flex-grow pt-[88px]",children:(0,n.jsxs)("div",{className:"container mx-auto max-w-7xl px-4 py-8",children:[(0,n.jsxs)(m.z,{variant:"ghost",className:"text-[#5C5C5A] hover:text-[#333333] hover:bg-[#284E4C]/5 mb-8",onClick:()=>e.back(),children:[(0,n.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),j("checkout.back_to_property")]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-[#333333]",children:j("checkout.complete_your_booking")}),(0,n.jsx)(B.Z,{className:"h-5 w-5 text-emerald-500"})]}),(0,n.jsxs)("p",{className:"text-[#5C5C5A] mb-8 flex items-center",children:[(0,n.jsx)(U.Z,{className:"h-4 w-4 mr-2 text-[#284E4C]"}),j("checkout.bank_level_security")]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,n.jsxs)(o.Zb,{className:"overflow-visible border-0 shadow-sm bg-white","data-section":"guest-info",children:[(0,n.jsx)("div",{className:"bg-[#F1F3EE] px-6 py-4 border-b border-gray-100",children:(0,n.jsx)("h2",{className:"text-xl font-semibold text-[#333333]",children:j("checkout.guest_information")})}),(0,n.jsx)("div",{className:"p-6",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"firstName",className:"text-sm font-medium text-[#333333]",children:j("checkout.first_name")}),(0,n.jsx)(r.I,{id:"firstName",value:T,onChange:eC,placeholder:j("checkout.john"),required:!0,className:"bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333]"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"lastName",className:"text-sm font-medium text-[#333333]",children:j("checkout.last_name")}),(0,n.jsx)(r.I,{id:"lastName",value:_,onChange:ew,placeholder:j("checkout.doe"),required:!0,className:"bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333]"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"email",className:"text-sm font-medium text-[#333333]",children:j("checkout.email")}),(0,n.jsx)(r.I,{id:"email",type:"email",value:S,onChange:e=>I(e.target.value),placeholder:j("checkout.john_example"),required:!0,className:"bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333]"}),(0,n.jsxs)("p",{className:"text-xs text-[#5C5C5A] flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-3 w-3 mr-1 text-emerald-500"}),j("checkout.booking_confirmation_email")]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"phone",className:"text-sm font-medium text-[#333333]",children:j("checkout.phone_number")}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(G.m,{value:k,onValueChange:w,className:"w-[140px]"}),(0,n.jsx)(r.I,{id:"phone",type:"tel",value:F,onChange:e=>A(e.target.value),placeholder:j("checkout.phone_placeholder"),required:!0,className:"bg-gray-50 border-gray-200 focus:border-[#284E4C] focus:ring-[#284E4C]/20 text-[#333333]"})]}),(0,n.jsxs)("p",{className:"text-xs text-[#5C5C5A] flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-3 w-3 mr-1 text-emerald-500"}),j("checkout.booking_updates_phone")]})]})]})})]}),(0,n.jsxs)(o.Zb,{className:"overflow-hidden border-0 shadow-sm bg-white",children:[(0,n.jsx)("div",{className:"bg-[#F1F3EE] px-6 py-4 border-b border-gray-100",children:(0,n.jsx)("h2",{className:"text-xl font-semibold text-[#333333]",children:j("checkout.payment_details")})}),W&&f&&(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6 flex items-start gap-3",children:[(0,n.jsx)(U.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900",children:j("checkout.secure_payment")}),(0,n.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:j("checkout.payment_encrypted")})]})]}),(0,n.jsx)(C,{amount:ek(Y||0),nativeCurrency:h,couponCode:null==eb?void 0:eb.code,couponDiscount:X,couponType:null==eb?void 0:eb.discount_type,couponValue:null==eb?void 0:eb.discount_value,propertyId:f.id.toString(),firstName:T,lastName:_,email:S,phone:"".concat(k).concat(F),guests:eu||"1",property:f,hostawayCity:ep,onValidationFailed:()=>{}},"".concat(h,"-").concat(Y,"-").concat((null==eb?void 0:eb.code)||"no-coupon"))]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,n.jsx)(U.Z,{className:"h-6 w-6 text-emerald-600"})}),(0,n.jsx)("h3",{className:"font-medium mb-1 text-[#333333]",children:j("checkout.secure_booking")}),(0,n.jsx)("p",{className:"text-sm text-[#5C5C5A]",children:j("checkout.data_protected")})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,n.jsx)(q.Z,{className:"h-6 w-6 text-blue-600"})}),(0,n.jsx)("h3",{className:"font-medium mb-1 text-[#333333]",children:j("checkout.best_price")}),(0,n.jsx)("p",{className:"text-sm text-[#5C5C5A]",children:j("checkout.best_rates_guarantee")})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,n.jsx)(p.Z,{className:"h-6 w-6 text-purple-600"})}),(0,n.jsx)("h3",{className:"font-medium mb-1 text-[#333333]",children:j("checkout.secure_payment")}),(0,n.jsx)("p",{className:"text-sm text-[#5C5C5A]",children:j("checkout.payments_processed_securely")})]})]})]}),(0,n.jsx)("div",{className:"lg:col-span-1",children:M?(0,n.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#284E4C]"})}):f?(0,n.jsx)(P,{property:f,fromDate:ed,toDate:eh,guests:eu,totalPrice:W,cleaningFee:f.cleaningFee,formatAmount:eN,dailyPrices:R,nativeCurrency:em,coupon:eb,couponDiscount:X,finalPrice:Y,lengthOfStayDiscount:et,lengthOfStayDiscountPercentage:en,onCouponUpdate:eT}):null})]})]})})})}[{code:"+44",country:"UK",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"+33",country:"France",flag:"\uD83C\uDDEB\uD83C\uDDF7"},{code:"+213",country:"Algeria",flag:"\uD83C\uDDE9\uD83C\uDDFF"},{code:"+1",country:"USA",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"+91",country:"India",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"+86",country:"China",flag:"\uD83C\uDDE8\uD83C\uDDF3"},{code:"+81",country:"Japan",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"+49",country:"Germany",flag:"\uD83C\uDDE9\uD83C\uDDEA"},{code:"+39",country:"Italy",flag:"\uD83C\uDDEE\uD83C\uDDF9"},{code:"+34",country:"Spain",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"+351",country:"Portugal",flag:"\uD83C\uDDF5\uD83C\uDDF9"},{code:"+31",country:"Netherlands",flag:"\uD83C\uDDF3\uD83C\uDDF1"},{code:"+32",country:"Belgium",flag:"\uD83C\uDDE7\uD83C\uDDEA"},{code:"+41",country:"Switzerland",flag:"\uD83C\uDDE8\uD83C\uDDED"},{code:"+46",country:"Sweden",flag:"\uD83C\uDDF8\uD83C\uDDEA"},{code:"+47",country:"Norway",flag:"\uD83C\uDDF3\uD83C\uDDF4"},{code:"+45",country:"Denmark",flag:"\uD83C\uDDE9\uD83C\uDDF0"},{code:"+358",country:"Finland",flag:"\uD83C\uDDEB\uD83C\uDDEE"},{code:"+48",country:"Poland",flag:"\uD83C\uDDF5\uD83C\uDDF1"},{code:"+43",country:"Austria",flag:"\uD83C\uDDE6\uD83C\uDDF9"}].sort((e,t)=>e.country.localeCompare(t.country));let J=e=>{var t,s,n,a,i,o,r,c,l,d;localStorage.setItem("bookingPropertyName",e.propertyName||""),localStorage.setItem("bookingPropertyImage",(null===(t=e.property)||void 0===t?void 0:t.pictureUrl)||""),localStorage.setItem("bookingFirstName",(null===(s=e.guestName)||void 0===s?void 0:s.split(" ")[0])||""),localStorage.setItem("bookingLastName",(null===(n=e.guestName)||void 0===n?void 0:n.split(" ").slice(1).join(" "))||""),localStorage.setItem("bookingEmail",e.guestEmail||""),localStorage.setItem("bookingPhone",e.guestPhone||""),localStorage.setItem("bookingArrivalDate",e.checkIn||""),localStorage.setItem("bookingDepartureDate",e.checkOut||""),localStorage.setItem("bookingGuests",e.numberOfGuests||""),localStorage.setItem("bookingCity",e.city||""),localStorage.setItem("bookingCurrency",e.currency||""),localStorage.setItem("bookingTotalPrice",parseFloat(e.totalPrice||"0").toFixed(2)),localStorage.setItem("bookingAmenityBeds",(null===(i=e.property)||void 0===i?void 0:null===(a=i.bedrooms)||void 0===a?void 0:a.toString())||"0"),localStorage.setItem("bookingAmenityBaths",(null===(r=e.property)||void 0===r?void 0:null===(o=r.bathrooms)||void 0===o?void 0:o.toString())||"0"),localStorage.setItem("bookingAmenityGuests",(null===(l=e.property)||void 0===l?void 0:null===(c=l.maxGuests)||void 0===c?void 0:c.toString())||"0"),localStorage.setItem("bookingListingId",(null===(d=e.propertyId)||void 0===d?void 0:d.toString())||""),e.reservationId&&localStorage.setItem("bookingReservationId",e.reservationId)}},35974:function(e,t,s){s.d(t,{C:function(){return r}});var n=s(57437);s(2265);var a=s(77712),i=s(94508);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function r(e){let{className:t,variant:s,...a}=e;return(0,n.jsx)("div",{className:(0,i.cn)(o({variant:s}),t),...a})}}}]);